<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width" />
    <title>Media Chrome Default Theme Example</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
    <script type="module" src="../../dist/index.js"></script>
    <script type="module" src="../../src/js/themes/media-theme-template.js"></script>
  </head>
  <body>
    <style>
      main {
        max-width: 720px;
        margin: 20px auto;
      }

      /** add styles to prevent CLS (Cumulative Layout Shift) */
      media-theme-template {
        display: block;         /* expands the container if preload=none */
        max-width: 720px;       /* allows the container to shrink if small */
        aspect-ratio: 16 / 9;   /* set container aspect ratio if preload=none */
      }

      video {
        width: 100%;      /* prevents video to expand beyond its container */
      }
    </style>

    <main>
      <template id="my-fancy-theme">
        <style>
          [disabled] {
            opacity: .6;
            cursor: not-allowed;
          }
          media-loading-indicator {
            pointer-events: none;
            position: absolute;
            display: flex;
            flex-flow: row;
            align-items: center;
            justify-content: center;
          }
          .spacer {
            flex-grow: 1;
          }
        </style>

        <svg style="display: none;">
          <symbol id="fullscreen-enter" aria-hidden="true" viewBox="0 0 24 24">
            <path d="M20.25 14.5a.76.76 0 0 0-.75.75v4.25h-4.25a.75.75 0 1 0 0 1.5h5a.76.76 0 0 0 .75-.75v-5a.76.76 0 0 0-.75-.75Zm0-11.5h-5a.76.76 0 0 0-.75.75.76.76 0 0 0 .75.75h4.25v4.25a.75.75 0 1 0 1.5 0v-5a.76.76 0 0 0-.75-.75ZM8.75 19.5H4.5v-4.25a.76.76 0 0 0-.75-.75.76.76 0 0 0-.75.75v5a.76.76 0 0 0 .75.75h5a.75.75 0 1 0 0-1.5Zm0-16.5h-5a.76.76 0 0 0-.75.75v5a.76.76 0 0 0 .75.75.76.76 0 0 0 .75-.75V4.5h4.25a.76.76 0 0 0 .75-.75.76.76 0 0 0-.75-.75Z"/>
          </symbol>
        </svg>

        <media-controller>
          <slot name="media" slot="media"></slot>
          <media-poster-image slot="poster" part="poster" src="{{poster}}" placeholder-src="{{placeholder}}"></media-poster-image>
          <media-loading-indicator slot="centered-chrome" no-auto-hide></media-loading-indicator>

          <template directive="layout" expression="on-demand extra-small">
            <media-control-bar>
              <media-play-button disabled="{{disabled}}" aria-disabled="{{disabled | string}}"></media-play-button>
              <media-time-range disabled="{{disabled}}" aria-disabled="{{disabled | string}}"></media-time-range>
              <media-fullscreen-button disabled="{{disabledFullscreen}}" aria-disabled="{{disabledFullscreen | string}}">
                <svg slot="enter" viewBox="0 0 24 24"><use xlink:href="#fullscreen-enter" /></svg>
              </media-fullscreen-button>
            </media-control-bar>
          </template>

          <template directive="layout" expression="on-demand large">
            <media-control-bar slot="top-chrome">
              <template directive="if" expression="title">
                <media-text-display part="top title display">
                  <b>{{title | string}}</b>
                </media-text-display>
              </template>
            </media-control-bar>
            <div slot="centered-chrome" class="center-controls">
              <!-- Here the modifier casts this expression value to a string, syntax is up to us. Can be changed -->
              <media-play-button part="center play button" disabled="{{disabled}}" aria-disabled="{{disabled | string}}"></media-play-button>
            </div>
            <media-control-bar>
              <media-play-button disabled="{{disabled}}" aria-disabled="{{disabled | string}}"></media-play-button>
              <media-time-range disabled="{{disabled}}" aria-disabled="{{disabled | string}}"></media-time-range>
              <media-fullscreen-button disabled="{{disabledFullscreen}}" aria-disabled="{{disabledFullscreen | string}}">
                <svg slot="enter" viewBox="0 0 24 24"><use xlink:href="#fullscreen-enter" /></svg>
              </media-fullscreen-button>
            </media-control-bar>
          </template>

          <!-- This could be a solution for when you'd like to re-use certain elements across different layouts -->
          <!-- In this example the play and fullscreen button in the bottom control bar could be the same elements in extra small and large,
                not working yet because they have to be cached in the template parts processor -->
          <!-- It's quite verbose but this would be the foundation on which it is build, I could see we introduce non-HTML language
                in the future but it would translate to what you see below at runtime if we chose template parts -->
          <template directive="set" expression="centerPlayButton">
            <media-play-button part="center play button" disabled="{{disabled}}" aria-disabled="{{disabled | string}}"></media-play-button>
          </template>
          <template directive="set" expression="playButton">
            <media-play-button disabled="{{disabled}}" aria-disabled="{{disabled | string}}"></media-play-button>
          </template>
          <template directive="set" expression="fullscreenButton">
            <media-fullscreen-button disabled="{{disabled}}" aria-disabled="{{disabled | string}}">
              <svg slot="enter" viewBox="0 0 24 24"><use xlink:href="#fullscreen-enter" /></svg>
            </media-fullscreen-button>
          </template>

          <template directive="layout" expression="live extra-small">
            <media-control-bar>
              {{playButton}}
              <div class="spacer"></div>
              {{fullscreenButton}}
            </media-control-bar>
          </template>

          <template directive="layout" expression="live large">
            <media-control-bar slot="top-chrome">
              <template directive="if" expression="title">
                <media-text-display part="top title display">
                  <b>{{title | string}} but live</b>
                </media-text-display>
              </template>
            </media-control-bar>
            <div slot="centered-chrome">
              {{centerPlayButton}}
            </div>
            <media-control-bar>
              {{playButton}}
              <div class="spacer"></div>
              {{fullscreenButton}}
            </media-control-bar>
          </template>

          <slot></slot>
        </media-controller>
      </template>

      <!-- Best to stick to lowercase attributes similar to native, transformed to camelCase for expressions, similar to props -->
      <media-theme-template
        id="theme"
        template="my-fancy-theme"
        poster="https://image.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/thumbnail.jpg"
        layout="on-demand extra-small"
        title="This is easy pie"
        disabled-fullscreen
      >
        <video
          slot="media"
          src="https://stream.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/high.mp4"
          crossorigin
          muted
          playsinline
        >
          <track
            label="thumbnails"
            default
            kind="metadata"
            src="https://image.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/storyboard.vtt"
          />
        </video>
      </media-theme-template>

      <br>

      <fieldset>
        <legend>Select a layout:</legend>
        <div>
          <input type="radio" id="oe" name="layout" value="on-demand extra-small" checked>
          <label for="oe">On-demand Extra small</label>
        </div>
        <div>
          <input type="radio" id="ol" name="layout" value="on-demand large">
          <label for="ol">On-demand Large</label>
        </div>
        <div>
          <input type="radio" id="le" name="layout" value="live extra-small">
          <label for="le">Live Extra small</label>
        </div>
        <div>
          <input type="radio" id="ll" name="layout" value="live large">
          <label for="ll">Live Large</label>
        </div>
      </fieldset>

      <fieldset>
        <div>
          <input id="louie" placeholder="Enter title">
        </div>
      </fieldset>

      <script>
        let handler = function() {
          if (this.checked) theme.setAttribute('layout', this.value);
        };
        oe.onclick = ol.onclick = le.onclick = ll.onclick = handler;

        louie.oninput = function() {
          theme.setAttribute('title', this.value);
        }
      </script>
    </main>

  </body>
</html>
