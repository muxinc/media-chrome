import type { NextPage } from 'next';
import Head from 'next/head';
import styles from '../styles/Home.module.css';
import {
  MediaController,
  MediaControlBar,
  MediaTimeRange,
  MediaTimeDisplay,
  MediaLoadingIndicator,
  MediaVolumeRange,
  MediaPlaybackRateButton,
  MediaPlayButton,
  MediaSeekBackwardButton,
  MediaSeekForwardButton,
  MediaMuteButton,
  MediaCaptionsButton,
  MediaAirplayButton,
  MediaPipButton,
  MediaFullscreenButton,
  MediaPosterImage,
} from 'media-chrome/dist/react';
import { useState } from 'react';

const primaryColor = 'white';
const chromeStyles = {
  '--media-icon-color': primaryColor,
  '--media-range-thumb-background': primaryColor,
  '--media-range-bar-color': primaryColor,
  color: primaryColor,
};

const Home: NextPage = () => {
  const [mounted, setMounted] = useState(true);

  return (
    <div className={styles.container}>
      <Head>
        <title>Media Chrome React+Next.JS</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <h1 className={styles.title}>
          Welcome to{' '}
          <a href="https://www.media-chrome.org" target="_blank" rel="noreferrer">
            Media Chrome!
          </a>
        </h1>
        <br/>
        <button id="mount-btn" onClick={() => setMounted(prev => !prev)}>
          {mounted ? "Unmount": "Mount"}
        </button>
        <br/>
        <div className={styles.grid}>
          {mounted && (<MediaController
            style={chromeStyles}
            defaultSubtitles
          >
            <video
              slot="media"
              src="https://stream.mux.com/A3VXy02VoUinw01pwyomEO3bHnG4P32xzV7u1j1FSzjNg/high.mp4"
              preload="auto"
              muted
              crossOrigin=""
            >
              <track
                label="thumbnails"
                default
                kind="metadata"
                src="https://image.mux.com/A3VXy02VoUinw01pwyomEO3bHnG4P32xzV7u1j1FSzjNg/storyboard.vtt"
              />
              <track
                label="English"
                kind="captions"
                srcLang="en"
                src="./vtt/en-cc.vtt"
              />
            </video>
            <MediaPosterImage
              slot="poster"
              src="https://image.mux.com/A3VXy02VoUinw01pwyomEO3bHnG4P32xzV7u1j1FSzjNg/thumbnail.jpg"
              placeholderSrc="data:image/jpeg;base64,/9j/2wBDABQODxIPDRQSEBIXFRQYHjIhHhwcHj0sLiQySUBMS0dARkVQWnNiUFVtVkVGZIhlbXd7gYKBTmCNl4x9lnN+gXz/2wBDARUXFx4aHjshITt8U0ZTfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHz/wAARCAAUADADASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECBAP/xAAdEAEBAAEEAwAAAAAAAAAAAAAAARECAxITFCFR/8QAGQEAAwADAAAAAAAAAAAAAAAAAAEDAgQF/8QAGBEBAQEBAQAAAAAAAAAAAAAAAAETERL/2gAMAwEAAhEDEQA/ANeC4ldyI1b2EtIzzrrIqYZLvl5FGkGdbfQzGPvo76WsPxXLlfqbaA5va2iVJADgPELACsD/2Q=="
            ></MediaPosterImage>
            <MediaLoadingIndicator
              noautohide
              slot="centered-chrome"
              style={{ '--media-loading-indicator-icon-height': '200px' }}
            ></MediaLoadingIndicator>
            <MediaControlBar>
              <MediaPlayButton></MediaPlayButton>
              <MediaSeekBackwardButton seekOffset={10}></MediaSeekBackwardButton>
              <MediaSeekForwardButton seekOffset={10}></MediaSeekForwardButton>
              <MediaTimeRange></MediaTimeRange>
              <MediaTimeDisplay showDuration></MediaTimeDisplay>
              <MediaMuteButton></MediaMuteButton>
              <MediaVolumeRange></MediaVolumeRange>
              <MediaPlaybackRateButton></MediaPlaybackRateButton>
              <MediaCaptionsButton></MediaCaptionsButton>
              <MediaAirplayButton></MediaAirplayButton>
              <MediaPipButton></MediaPipButton>
              <MediaFullscreenButton></MediaFullscreenButton>
            </MediaControlBar>
          </MediaController>)}
        </div>
      </main>

      <footer className={styles.footer}></footer>
    </div>
  );
};

export default Home;
