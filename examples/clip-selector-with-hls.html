<html>
<head>
  <meta name="viewport" content="width=device-width">
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script type="module" src="../dist/index.js"></script>
</head>
<style>
  /*
     over-ride the opacity rule so that the media-control-bar is always
     showing (the default behavior is to hide it when media is playing)
   */
  media-control-bar {
    opacity: 1;
  }
</style>
<body>

<media-container>
  <video
    slot="media"
    src="https://stream.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe.m3u8"
    crossorigin
  >
    <track label="thumbnails" default kind="metadata" src="https://image.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/storyboard.vtt"></track>
  </video>
  <media-control-bar>
    <media-play-button></media-play-button>
    <media-clip-selector></media-clip-selector>
    <media-mute-button></media-mute-button>
    <media-volume-range></media-volume-range>
  </media-control-bar>
</media-container>

<p id="current-time"></p>
<p id="start-time"></p>
<p id="end-time"></p>

</body>

<script>
  const videoEl = document.querySelector('video');
  var videoSrc = 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8';

  if (videoEl.canPlayType('application/vnd.apple.mpegurl')) {
    // if the browser supports HLS natively, we don't need to do anything
  } else if (Hls.isSupported()) {
    const hls = new Hls();
    const videoSrc = videoEl.getAttribute('src');
    hls.loadSource(videoSrc);
    hls.attachMedia(videoEl);
  }

  const mediaClipSelect = document.querySelector('media-clip-selector');
  const startTimeEl = document.querySelector('#start-time');
  const endTimeEl = document.querySelector('#end-time');
  const currentTimeEl = document.querySelector('#current-time');

  mediaClipSelect.addEventListener('update', (evt) => {
    const { startTime, endTime } = evt.detail;
    startTimeEl.innerHTML = `Start time seconds: ${startTime}`;
    endTimeEl.innerHTML = `End time seconds: ${endTime}`;
  });

  videoEl.addEventListener('timeupdate', () => {
    currentTimeEl.innerHTML = `Current time: ${Math.round(videoEl.currentTime)}`;
  });
</script>
</html>
